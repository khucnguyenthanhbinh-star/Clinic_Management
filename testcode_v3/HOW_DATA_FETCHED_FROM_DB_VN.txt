â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            GIáº¢I THÃCH CHI TIáº¾T: CÃCH Láº¤Y Dá»® LIá»†U Tá»ª Báº¢NG DATABASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Má»¤C Lá»¤C:
1. Cáº¥u trÃºc dá»¯ liá»‡u trong báº£ng users
2. HÃ m get_user() - Láº¥y 1 ngÆ°á»i dÃ¹ng
3. HÃ m get_users_by_role() - Láº¥y nhiá»u ngÆ°á»i dÃ¹ng theo vai trÃ²
4. CÃ¡ch parse JSON tá»« cá»™t "info"
5. ToÃ n bá»™ luá»“ng dá»¯ liá»‡u tá»« database Ä‘áº¿n giao diá»‡n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. Cáº¤U TRÃšC Dá»® LIá»†U TRONG Báº¢NG USERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Database: clinic.db
Báº£ng: users

Cáº¥u trÃºc cá»™t:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 0       â”‚ 1        â”‚ 2    â”‚ 3    â”‚ 4                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚username â”‚ password â”‚ role â”‚ name â”‚ info (JSON string)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚admin    â”‚ hash123  â”‚ adminâ”‚ Adminâ”‚ {}                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚john_pt  â”‚ hash456  â”‚patientâ”‚ John â”‚ {"dob":"1990-05-15",          â”‚
â”‚         â”‚          â”‚      â”‚ Doe  â”‚ "phone":"0912345678",          â”‚
â”‚         â”‚          â”‚      â”‚      â”‚ "cccd":"001234567",            â”‚
â”‚         â”‚          â”‚      â”‚      â”‚ "address":"123 Nguyen Trai"}   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚dr_smith â”‚ hash789  â”‚doctorâ”‚ Smithâ”‚ {"specialty":"Nhi",            â”‚
â”‚         â”‚          â”‚      â”‚      â”‚ "branch":"HN",                 â”‚
â”‚         â”‚          â”‚      â”‚      â”‚ "exp":"5",                     â”‚
â”‚         â”‚          â”‚      â”‚      â”‚ "rating":"5"}                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CHÃš Ã:
- Cá»™t index 0-4 tÆ°Æ¡ng á»©ng vá»›i row[0], row[1], row[2], row[3], row[4]
- Cá»™t "info" lÃ  JSON string, cáº§n parse Ä‘á»ƒ láº¥y dá»¯ liá»‡u chi tiáº¿t

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. HÃ€M get_user(username) - Láº¤Y 1 NGÆ¯á»œI DÃ™NG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Vá»Š TRÃ FILE: /database/models.py

def get_user(self, username):
    self.cursor.execute("SELECT * FROM users WHERE username = ?", (username,))
    row = self.cursor.fetchone()
    if row:
        return {"username": row[0], "password": row[1], "role": row[2], "name": row[3], "info": row[4]}
    return None

ğŸ” GIáº¢I THÃCH CHI TIáº¾T:

BÆ¯á»šC 1: Táº¡o cÃ¢u SQL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ self.cursor.execute("SELECT * FROM users WHERE username = ?",   â”‚
â”‚                     (username,))                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã NGHÄ¨A:
- "SELECT * FROM users" = Chá»n Táº¤T Cáº¢ cÃ¡c cá»™t (*, tá»©c lÃ  táº¥t cáº£)
- "WHERE username = ?" = Äiá»u kiá»‡n: username = giÃ¡ trá»‹ Ä‘Æ°á»£c truyá»n vÃ o
- (username,) = Tham sá»‘, giÃ¡ trá»‹ thá»±c táº¿ Ä‘á»ƒ thay vÃ o dáº¥u "?"
- VÃ­ dá»¥: Náº¿u username = "john_pt" â†’ trá»Ÿ thÃ nh "WHERE username = 'john_pt'"

VÃŒ SAO DÃ™NG "?" THAY VÃŒ Ná»I STRING TRá»°C TIáº¾P?
âœ“ Báº£o máº­t: Chá»‘ng SQL Injection attack
âœ“ Sáº¡ch sáº½: Code dá»… Ä‘á»c
âœ“ Tá»± Ä‘á»™ng escape: SQLite tá»± xá»­ lÃ½ kÃ½ tá»± Ä‘áº·c biá»‡t

BÆ¯á»šC 2: Láº¥y káº¿t quáº£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ row = self.cursor.fetchone()                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã NGHÄ¨A:
- fetchone() = Láº¥y 1 dÃ²ng káº¿t quáº£ Ä‘áº§u tiÃªn
- Náº¿u tÃ¬m tháº¥y â†’ row lÃ  má»™t tuple (bá»™ tuple)
- Náº¿u khÃ´ng tÃ¬m tháº¥y â†’ row = None

VÃ Dá»¤:
row = ('john_pt', 'hash456', 'patient', 'John Doe', '{"dob":"1990-05-15",...}')
      â†“ row[0]    â†“ row[1]   â†“ row[2]   â†“ row[3]   â†“ row[4]

BÆ¯á»šC 3: Chuyá»ƒn Ä‘á»•i thÃ nh Dictionary
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ if row:                                                         â”‚
â”‚     return {"username": row[0], "password": row[1],             â”‚
â”‚             "role": row[2], "name": row[3], "info": row[4]}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃŒ SAO CHUYá»‚N THÃ€NH DICTIONARY?
- Dá»… truy cáº­p: user_data["username"] thay vÃ¬ user_data[0]
- Dá»… Ä‘á»c: Biáº¿t ngay lÃ  láº¥y cÃ¡i gÃ¬
- An toÃ n: Náº¿u thÃªm cá»™t má»›i khÃ´ng pháº£i sá»­a index

Káº¾T QUáº¢ TRáº¢ Vá»€:
{
    "username": "john_pt",
    "password": "hash456",
    "role": "patient",
    "name": "John Doe",
    "info": '{"dob":"1990-05-15","phone":"0912345678",...}'
}

Náº¾U KHÃ”NG TÃŒM THáº¤Y:
return None

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. HÃ€M get_users_by_role(role) - Láº¤Y NHIá»€U NGÆ¯á»œI DÃ™NG THEO VAI TRÃ’
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Vá»Š TRÃ FILE: /database/models.py

def get_users_by_role(self, role):
    self.cursor.execute("SELECT username, name, role, info FROM users WHERE role = ?", (role,))
    rows = self.cursor.fetchall()
    return [{"username": r[0], "name": r[1], "role": r[2], "info": r[3]} for r in rows]

ğŸ” GIáº¢I THÃCH CHI TIáº¾T:

BÆ¯á»šC 1: Táº¡o cÃ¢u SQL Ä‘á»ƒ láº¥y Táº¤T Cáº¢ ngÆ°á»i dÃ¹ng cÃ³ role cá»¥ thá»ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ self.cursor.execute("SELECT username, name, role, info          â”‚
â”‚                     FROM users WHERE role = ?", (role,))        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KHÃC BIá»†T SO Vá»šI get_user():
- get_user(): SELECT * (chá»n Táº¤T Cáº¢ cá»™t)
- get_users_by_role(): SELECT username, name, role, info (chá»‰ chá»n 4 cá»™t cáº§n thiáº¿t)
- LÃ½ do: Tiáº¿t kiá»‡m bá»™ nhá»›, khÃ´ng cáº§n password khi hiá»ƒn thá»‹ danh sÃ¡ch

VÃ Dá»¤:
- Náº¿u role = "patient" â†’ TÃ¬m Táº¤T Cáº¢ bá»‡nh nhÃ¢n
- Náº¿u role = "doctor" â†’ TÃ¬m Táº¤T Cáº¢ bÃ¡c sÄ©

BÆ¯á»šC 2: Láº¥y Táº¤T Cáº¢ káº¿t quáº£ (khÃ´ng chá»‰ 1)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rows = self.cursor.fetchall()                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ Dá»¤ Káº¾T QUáº¢:
rows = [
    ('john_pt', 'John Doe', 'patient', '{"dob":"1990-05-15",...}'),
    ('jane_pt', 'Jane Smith', 'patient', '{"dob":"1985-03-20",...}'),
    ('bob_pt', 'Bob Wilson', 'patient', '{"dob":"1992-07-10",...}')
]

Má»—i pháº§n tá»­ lÃ  má»™t tuple (dÃ²ng tá»« báº£ng)

BÆ¯á»šC 3: Chuyá»ƒn Ä‘á»•i thÃ nh List of Dictionaries
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ return [{"username": r[0], "name": r[1],                        â”‚
â”‚          "role": r[2], "info": r[3]} for r in rows]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ÄÃ‚Y LÃ€ "LIST COMPREHENSION" (vÃ²ng láº·p nÃ©n)
- for r in rows: Láº·p qua má»—i dÃ²ng (tuple)
- {"username": r[0], ...}: Chuyá»ƒn má»—i tuple thÃ nh dictionary
- [...]: Bao gá»n láº¡i thÃ nh list

TÆ¯Æ NG ÄÆ¯Æ NG Vá»šI:

result = []
for r in rows:
    result.append({
        "username": r[0],
        "name": r[1],
        "role": r[2],
        "info": r[3]
    })
return result

Káº¾T QUáº¢ TRáº¢ Vá»€:
[
    {
        "username": "john_pt",
        "name": "John Doe",
        "role": "patient",
        "info": '{"dob":"1990-05-15","phone":"0912345678",...}'
    },
    {
        "username": "jane_pt",
        "name": "Jane Smith",
        "role": "patient",
        "info": '{"dob":"1985-03-20",...}'
    },
    {
        "username": "bob_pt",
        "name": "Bob Wilson",
        "role": "patient",
        "info": '{"dob":"1992-07-10",...}'
    }
]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. CÃCH PARSE JSON Tá»ª Cá»˜T "INFO"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ Váº¤N Äá»€:
Cá»™t "info" trong database lÆ°u dÆ°á»›i dáº¡ng TEXT (string), khÃ´ng pháº£i Python dictionary.

VÃ­ dá»¥:
- LÆ°u: '{"dob":"1990-05-15","phone":"0912345678","cccd":"001234567"}'
- LÃ  string, khÃ´ng pháº£i dict

ğŸ”§ GIáº¢I PHÃP: Sá»­ dá»¥ng json.loads()

TRONG MANAGE_PATIENTS.PY:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ try:                                                            â”‚
â”‚     info = json.loads(user_data["info"])                        â”‚
â”‚ except:                                                         â”‚
â”‚     info = {}                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BÆ¯á»šC 1: Gá»i json.loads()
json.loads(user_data["info"])

Ã NGHÄ¨A:
- json.loads() = Chuyá»ƒn JSON string thÃ nh Python dictionary
- Tá»«: '{"dob":"1990-05-15","phone":"0912345678",...}'
- ThÃ nh: {"dob":"1990-05-15","phone":"0912345678",...}

VÃ Dá»¤:

INPUT (JSON string):
'{"dob":"1990-05-15","phone":"0912345678","cccd":"001234567","address":"123 Nguyen Trai"}'

OUTPUT (Python dictionary):
{
    "dob": "1990-05-15",
    "phone": "0912345678",
    "cccd": "001234567",
    "address": "123 Nguyen Trai"
}

BÆ¯á»šC 2: Xá»­ lÃ½ exception (ngoáº¡i lá»‡)
try:
    info = json.loads(user_data["info"])
except:
    info = {}

VÃŒ SAO Cáº¦N TRY-EXCEPT?
- Náº¿u info field trá»‘ng hoáº·c khÃ´ng há»£p lá»‡ â†’ json.loads() sáº½ bá»‹ lá»—i
- except: Náº¿u lá»—i â†’ gÃ¡n info = {} (dictionary trá»‘ng)
- TrÃ¡nh chÆ°Æ¡ng trÃ¬nh crash

BÆ¯á»šC 3: Láº¥y giÃ¡ trá»‹ tá»« info dictionary
info.get('dob', 'N/A')

Ã NGHÄ¨A:
- info.get('dob') = Láº¥y giÃ¡ trá»‹ cá»§a key 'dob'
- , 'N/A' = Náº¿u key khÃ´ng tá»“n táº¡i, tráº£ vá» 'N/A' (máº·c Ä‘á»‹nh)

VÃ Dá»¤:

Náº¿u info = {"dob":"1990-05-15", "phone":"0912345678"}
- info.get('dob', 'N/A') â†’ "1990-05-15" (tÃ¬m tháº¥y)
- info.get('gender', 'N/A') â†’ "N/A" (khÃ´ng tÃ¬m tháº¥y, tráº£ vá» máº·c Ä‘á»‹nh)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. TOÃ€N Bá»˜ LUá»’NG Dá»® LIá»†U Tá»ª DATABASE Äáº¾N GIAO DIá»†N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ TÃŒNH HUá»NG: Admin click "Xem chi tiáº¿t" bá»‡nh nhÃ¢n

BÆ¯á»šC 1: Láº¥y dá»¯ liá»‡u tá»« Treeview (Báº£ng)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ item_id = self.get_selected_patient()                           â”‚
â”‚ values = self.tree.item(item_id, "values")                      â”‚
â”‚ username = values[0]                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

values = ("john_pt", "John Doe", "0912345678", 5)
                     â†“ ÄÃ¢y lÃ  username
username = "john_pt"

BÆ¯á»šC 2: Truy váº¥n database
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_data = self.controller.db.get_user(username)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Gá»i: db.get_user("john_pt")
  â†“ Thá»±c hiá»‡n SQL:
    SELECT * FROM users WHERE username = 'john_pt'
  â†“ Káº¿t quáº£ tá»« database:
    ('john_pt', 'hash456', 'patient', 'John Doe', '{"dob":"1990-05-15",...}')
  â†“ Chuyá»ƒn Ä‘á»•i thÃ nh dictionary:

user_data = {
    "username": "john_pt",
    "password": "hash456",
    "role": "patient",
    "name": "John Doe",
    "info": '{"dob":"1990-05-15","phone":"0912345678",...}'
}

BÆ¯á»šC 3: Parse JSON tá»« cá»™t "info"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ try:                                                            â”‚
â”‚     info = json.loads(user_data["info"])                        â”‚
â”‚ except:                                                         â”‚
â”‚     info = {}                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tá»«:  '{"dob":"1990-05-15","phone":"0912345678",...}'
ThÃ nh: {"dob":"1990-05-15","phone":"0912345678",...}

info = {
    "dob": "1990-05-15",
    "phone": "0912345678",
    "cccd": "001234567",
    "address": "123 Nguyen Trai",
    "history": "",
    "insurance": ""
}

BÆ¯á»šC 4: XÃ¢y dá»±ng string chi tiáº¿t
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ details = f"""                                                  â”‚
â”‚ ThÃ´ng tin bá»‡nh nhÃ¢n:                                            â”‚
â”‚ TÃªn Ä‘Äƒng nháº­p: {username}                                       â”‚
â”‚ Há» tÃªn: {user_data['name']}                                     â”‚
â”‚ NgÃ y sinh: {info.get('dob', 'N/A')}                             â”‚
â”‚ Giá»›i tÃ­nh: {info.get('gender', 'N/A')}                          â”‚
â”‚ Sá»‘ Ä‘iá»‡n thoáº¡i: {info.get('phone', 'N/A')}                       â”‚
â”‚ ... (cÃ¡c trÆ°á»ng khÃ¡c)                                           â”‚
â”‚ """                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

f-string (f"...") = F-string cho phÃ©p nhÃºng biáº¿n báº±ng {}

VÃ Dá»¤ Káº¾T QUáº¢:
ThÃ´ng tin bá»‡nh nhÃ¢n:
========================================
TÃªn Ä‘Äƒng nháº­p: john_pt
Há» tÃªn: John Doe
NgÃ y sinh: 1990-05-15
Giá»›i tÃ­nh: N/A
Sá»‘ Ä‘iá»‡n thoáº¡i: 0912345678
CCCD: 001234567
Äá»‹a chá»‰: 123 Nguyen Trai
Lá»‹ch sá»­ bá»‡nh: N/A
Báº£o hiá»ƒm: N/A

BÆ¯á»šC 5: Hiá»ƒn thá»‹ trong popup
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ messagebox.showinfo("Chi tiáº¿t bá»‡nh nhÃ¢n", details)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cá»­a sá»• hiá»ƒn thá»‹ vá»›i ná»™i dung details

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BIá»‚U Äá»’ LUá»’NG HOÃ€N CHá»ˆNH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GIAO DIá»†N (UI)                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Báº£ng hiá»ƒn thá»‹ bá»‡nh nhÃ¢n:                                    â”‚ â”‚
â”‚ â”‚ [john_pt] [John Doe] [0912345678] [5]                       â”‚ â”‚
â”‚ â”‚ [jane_pt] [Jane Smith] [0987654321] [3]                     â”‚ â”‚
â”‚ â”‚ ...                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Admin click chá»n "john_pt" â†’ Click nÃºt "Xem chi tiáº¿t"           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lá»šP GIAO DIá»†N (manage_patients.py)                               â”‚
â”‚ get_selected_patient() â†’ username = "john_pt"                    â”‚
â”‚ Gá»i: self.controller.db.get_user("john_pt")                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lá»šP DATABASE (models.py)                                         â”‚
â”‚ def get_user(username):                                          â”‚
â”‚   SQL: SELECT * FROM users WHERE username = ?                    â”‚
â”‚   Fetch: fetchone() â†’ tuple                                      â”‚
â”‚   Return: dictionary                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CÆ  Sá» Dá»® LIá»†U (clinic.db)                                        â”‚
â”‚ Báº£ng: users                                                      â”‚
â”‚ DÃ²ng: john_pt | hash456 | patient | John Doe | JSON info        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ (Tráº£ vá»)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dictionary tá»« get_user()                                         â”‚
â”‚ {                                                                â”‚
â”‚   "username": "john_pt",                                         â”‚
â”‚   "password": "hash456",                                         â”‚
â”‚   "role": "patient",                                             â”‚
â”‚   "name": "John Doe",                                            â”‚
â”‚   "info": '{"dob":"1990-05-15",...}'                             â”‚
â”‚ }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ (Parse JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ json.loads(user_data["info"])                                    â”‚
â”‚ {"dob":"1990-05-15","phone":"0912345678",...}                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ (XÃ¢y dá»±ng string)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ details = f"""                                                   â”‚
â”‚ TÃªn Ä‘Äƒng nháº­p: john_pt                                           â”‚
â”‚ Há» tÃªn: John Doe                                                 â”‚
â”‚ NgÃ y sinh: 1990-05-15                                            â”‚
â”‚ ...                                                              â”‚
â”‚ """                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ (Hiá»ƒn thá»‹)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POPUP MESSAGEBOX                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ThÃ´ng tin bá»‡nh nhÃ¢n:                                         â”‚ â”‚
â”‚ â”‚ ========================================                     â”‚ â”‚
â”‚ â”‚ TÃªn Ä‘Äƒng nháº­p: john_pt                                       â”‚ â”‚
â”‚ â”‚ Há» tÃªn: John Doe                                             â”‚ â”‚
â”‚ â”‚ NgÃ y sinh: 1990-05-15                                        â”‚ â”‚
â”‚ â”‚ ...                                                          â”‚ â”‚
â”‚ â”‚                                      [OK]                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VÃ Dá»¤ THá»°C Táº¾ KHÃC: DANH SÃCH Bá»†NH NHÃ‚N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ TÃŒNH HUá»NG: Láº§n Ä‘áº§u tiÃªn vÃ o "Quáº£n lÃ½ bá»‡nh nhÃ¢n"

BÆ¯á»šC 1: refresh_list() Ä‘Æ°á»£c gá»i
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ def refresh_list(self):                                         â”‚
â”‚     for item in self.tree.get_children():                       â”‚
â”‚         self.tree.delete(item)  # XÃ³a háº¿t cÃ¡c dÃ²ng cÅ©          â”‚
â”‚     self.patients = self.controller.db.get_users_by_role("patient")
â”‚     self.appointments = self.controller.db.get_appointments()   â”‚
â”‚     self.filter_patients()  # Hiá»ƒn thá»‹ lá»c                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BÆ¯á»šC 2: Gá»i get_users_by_role("patient")
SQL: SELECT username, name, role, info FROM users WHERE role = 'patient'

Káº¿t quáº£ tá»« database (3 bá»‡nh nhÃ¢n):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚username  â”‚ name      â”‚ role    â”‚ info            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚john_pt   â”‚ John Doe  â”‚ patient â”‚ {...dob...}     â”‚
â”‚jane_pt   â”‚ Jane Smithâ”‚ patient â”‚ {...dob...}     â”‚
â”‚bob_pt    â”‚ Bob Wilsonâ”‚ patient â”‚ {...dob...}     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Chuyá»ƒn Ä‘á»•i thÃ nh:
self.patients = [
    {"username":"john_pt", "name":"John Doe", "role":"patient", "info":"..."},
    {"username":"jane_pt", "name":"Jane Smith", "role":"patient", "info":"..."},
    {"username":"bob_pt", "name":"Bob Wilson", "role":"patient", "info":"..."}
]

BÆ¯á»šC 3: filter_patients() Ä‘Æ°á»£c gá»i (khi search trá»‘ng â†’ hiá»ƒn thá»‹ táº¥t cáº£)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ for p in self.patients:                                         â”‚
â”‚     count = len([a for a in self.appointments                   â”‚
â”‚                  if a["patient"] == p["username"]])             â”‚
â”‚     phone = json.loads(p.get("info", "{}")).get("phone", "")    â”‚
â”‚     self.tree.insert("", "end", values=(p["username"],          â”‚
â”‚         p["name"], phone, count))                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ²ng láº·p qua má»—i bá»‡nh nhÃ¢n:
- Äáº¿m sá»‘ lá»‹ch háº¹n: count = 5 (vÃ­ dá»¥)
- Parse JSON tá»« info Ä‘á»ƒ láº¥y phone
- Insert dÃ²ng vÃ o Treeview

Káº¾T QUáº¢ TRÃŠN GIAO DIá»†N (Treeview):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Username â”‚ Há» tÃªn    â”‚ Äiá»‡n thoáº¡i   â”‚ Lá»‹ch háº¹n   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ john_pt  â”‚ John Doe  â”‚ 0912345678   â”‚ 5          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ jane_pt  â”‚ Jane Smithâ”‚ 0987654321   â”‚ 3          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bob_pt   â”‚ Bob Wilsonâ”‚ 0911223344   â”‚ 2          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TÃ“M Láº I - SÃU BÆ¯á»šC CHÃNH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Láº¤Y USERNAME Tá»ª UI
   Tá»« Treeview (báº£ng hiá»ƒn thá»‹) láº¥y dÃ²ng Ä‘Æ°á»£c chá»n
   
2ï¸âƒ£ TRUY Váº¤N DATABASE
   Gá»i db.get_user(username)
   â†’ SQL: SELECT * FROM users WHERE username = ?
   â†’ Database thá»±c thi vÃ  tráº£ vá» 1 dÃ²ng
   
3ï¸âƒ£ CHUYá»‚N TUPLE THÃ€NH DICTIONARY
   row = (username, password, role, name, info)
   â†’  {"username": row[0], "password": row[1], ...}
   
4ï¸âƒ£ PARSE JSON STRING THÃ€NH DICT
   json.loads(user_data["info"])
   â†’ '{"dob":"1990-05-15",...}' thÃ nh {"dob":"1990-05-15",...}
   
5ï¸âƒ£ Láº¤Y GIÃ TRá»Š Tá»ª DICT
   info.get('dob', 'N/A')
   â†’ Láº¥y giÃ¡ trá»‹, hoáº·c 'N/A' náº¿u khÃ´ng tá»“n táº¡i
   
6ï¸âƒ£ HIá»‚N THá»Š TRÃŠN UI
   XÃ¢y dá»±ng f-string vÃ  hiá»ƒn thá»‹ trong messagebox hoáº·c Treeview

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
